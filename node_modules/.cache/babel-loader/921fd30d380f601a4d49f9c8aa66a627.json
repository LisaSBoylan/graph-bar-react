{"ast":null,"code":"import _classCallCheck from \"/home/lboylan/Documents/Homework/HW3/graph-bar/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lboylan/Documents/Homework/HW3/graph-bar/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/lboylan/Documents/Homework/HW3/graph-bar/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/lboylan/Documents/Homework/HW3/graph-bar/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/lboylan/Documents/Homework/HW3/graph-bar/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/lboylan/Documents/Homework/HW3/graph-bar/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Graph from './Components/Graph/Graph.js';\n\nfunction buildBar(rates) {\n  // rates is an arraay of objects\n  // the objects are {countryCode:rate}\n  // we want [countryCode:style]\n  console.log(\"In buildBar\");\n  var bars = Object.entries(rates);\n  bars.forEach(function (entry) {\n    console.log(\"entry=\", entry[1]);\n    var value = entry[1]; // format value to be x.xx\n\n    var formatValue = parseFloat(value).toFixed(2) * 30;\n    var style = {\n      \"height\": formatValue + '%'\n    }; // format the JSX style height attribute          \n\n    entry[1] = style;\n    console.log(\"key-\", entry[1]);\n  });\n  console.log(\"buildBars.bars=\", bars);\n  return bars;\n}\n\nfunction getFetchUrl(baseCode) {\n  // Remove new base from comparator\n  console.log(\"In GetSelect\"); // Currently displayed currencies;\n\n  var symbols = [\"BGN\", \"SGD\", \"AUD\", \"EUR\", \"USD\"];\n  var comparator = \"BGN,SGD,AUD,EUR,USD\"; // Get the requested base currency\n\n  console.log(\"New Base Code:\", baseCode);\n  var i = 0;\n\n  while (symbols[i++].valueOf() !== this.baseCode && i < symbols.length) // find the code in symbols\n  {}\n\n  i--; // reposition counter to found item\n\n  if (symbols[i] === baseCode) {\n    comparator = symbols.splice(i, 1); // remmove element\n  }\n\n  console.log(\"symbols:\", comparator);\n  var fetchString = 'https://api.exchangeratesapi.io/2018-11-01?base=' + this.baseCode + \"&symbols=\" + symbols;\n  return fetchString;\n}\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      baseCode: \"\",\n      bars: [] // Add data during initial page load. Kind of likke constructor\n\n    };\n\n    _this.componentDidMount = function () {\n      console.log(\"In did Mount and State:\", _this.state);\n      var url = \"https://api.exchangeratesapi.io/latest?base=USD&symbols=BGN,GBP,AUD,EUR\";\n\n      _this.getData(url, \"USD\");\n    };\n\n    _this.onBaseCodeChange = function (ev) {\n      var code = ev.target.value;\n      var url = getFetchUrl(code); // Make request\n\n      getData(url, code);\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      console.log(\"Apps.render\");\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"Title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \" Currency\"), React.createElement(\"h2\", {\n        className: \"BaseValue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Base Currency:\"), React.createElement(\"select\", {\n        basecode: this.baseCode,\n        className: \"BaseCode\",\n        onChange: this.onBaseCodeChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"USA\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"USA\"), React.createElement(\"option\", {\n        value: \"AUD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"AUD\"), React.createElement(\"option\", {\n        value: \"SGD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"SGD\"), React.createElement(\"option\", {\n        value: \"EUR\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"EUR\")), React.createElement(Graph, {\n        className: \"Graph\",\n        bars: this.state.bars,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"getData\",\n    value: function getData(url, code) {\n      var _this2 = this;\n\n      console.log(\"In GetData\");\n      fetch(url).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        console.log(\"Got Data\");\n        console.log(\"Data=\", data);\n        console.log(\"Rates=\", data.rates);\n        var results = buildBar(data.rates);\n        console.log(\"results=\", results);\n\n        _this2.setState({\n          bars: results,\n          baseCode: code\n        });\n      });\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/lboylan/Documents/Homework/HW3/graph-bar/src/App.js"],"names":["React","Component","Graph","buildBar","rates","console","log","bars","Object","entries","forEach","entry","value","formatValue","parseFloat","toFixed","style","getFetchUrl","baseCode","symbols","comparator","i","valueOf","length","splice","fetchString","App","state","componentDidMount","url","getData","onBaseCodeChange","ev","code","target","fetch","then","response","json","data","results","setState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nimport Graph from './Components/Graph/Graph.js'\n\nfunction buildBar(rates)\n{\n    // rates is an arraay of objects\n    // the objects are {countryCode:rate}\n    // we want [countryCode:style]\n    console.log(\"In buildBar\");\n        \n    const bars = Object.entries(rates);\n    \n    bars.forEach(entry => {\n          console.log(\"entry=\", entry[1]);\n          const value = entry[1];\n          \n         // format value to be x.xx\n         const formatValue = parseFloat(value).toFixed(2) * 30;\n         const style = {\"height\" :  formatValue + '%'}; // format the JSX style height attribute          \n         entry[1]=style;\n         console.log(\"key-\", entry[1]);\n    });\n    console.log(\"buildBars.bars=\", bars);\n    return (bars);\n}\n\n\nfunction getFetchUrl(baseCode)\n{\n    // Remove new base from comparator\n    console.log(\"In GetSelect\");\n    \n    // Currently displayed currencies;\n    let symbols = [\"BGN\", \"SGD\", \"AUD\", \"EUR\", \"USD\"];\n    let comparator = \"BGN,SGD,AUD,EUR,USD\";\n    \n    // Get the requested base currency\n    console.log(\"New Base Code:\", baseCode);\n        \n    let i = 0;\n    while ((symbols[i++].valueOf() !== this.baseCode) && ( i < symbols.length))  // find the code in symbols\n    {}\n    \n    i--;  // reposition counter to found item\n    if (symbols[i] === baseCode)\n    {\n        comparator = symbols.splice(i,1);  // remmove element\n    }\n    console.log(\"symbols:\", comparator);\n    \n    let fetchString='https://api.exchangeratesapi.io/2018-11-01?base=' + this.baseCode + \"&symbols=\" + symbols;\n    return(fetchString);\n}\n\nclass App extends Component \n{\n\n  state = {\n    baseCode:\"\",\n    bars:[],\n  }\n\n\n  // Add data during initial page load. Kind of likke constructor\n  componentDidMount = () => {\n    console.log(\"In did Mount and State:\", this.state);\n    const url = \"https://api.exchangeratesapi.io/latest?base=USD&symbols=BGN,GBP,AUD,EUR\"\n    this.getData(url, \"USD\");\n  }\n\n  render() \n  {\n    console.log(\"Apps.render\");\n\n    return (\n      <div>\n        <h1 className=\"Title\"> Currency</h1>\n        <h2 className=\"BaseValue\">Base Currency:</h2>\n        <select \n          basecode={this.baseCode} \n          className=\"BaseCode\" \n          onChange={this.onBaseCodeChange}>\n          <option value=\"USA\">USA</option>\n          <option value=\"AUD\">AUD</option>\n          <option value=\"SGD\">SGD</option>\n          <option value=\"EUR\">EUR</option>\n        </select>\n        <Graph \n              className=\"Graph\"\n              bars={this.state.bars}        \n         />\n      </div>\n    );\n  }\n\n  onBaseCodeChange = (ev) => {\n      const code = ev.target.value;\n      const url =  getFetchUrl(code);\n   \n      // Make request\n      getData(url, code);\n  }\n\n  getData(url,code)\n  { \n    console.log(\"In GetData\");\n  \n     fetch(url)\n     .then(response => response.json())\n     .then ( (data) => {\n           console.log(\"Got Data\");\n           console.log(\"Data=\", data);\n           console.log(\"Rates=\", data.rates);\n           const results = buildBar(data.rates);\n           console.log(\"results=\", results);\n           this.setState({\n              bars:results,\n              baseCode:code,\n           });\n       });\n  } \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}